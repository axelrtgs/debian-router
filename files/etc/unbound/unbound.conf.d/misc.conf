# UNBOUND CONFIG
# for distro version see https://manpages.debian.org/stretch/unbound/unbound.conf.5.en.html (Version specific)
# for current version see https://nlnetlabs.nl/documentation/unbound/unbound.conf/
# external guide https://calomel.org/unbound_dns.html

server:
  interface-automatic: yes
  interface: 0.0.0.0
  interface: ::
  port: 53

  do-ip4: yes
  do-udp: yes
  do-tcp: yes

  # May be set to yes if you have IPv6 connectivity
  do-ip6: no

  # You want to leave this to no unless you have *native* IPv6. With 6to4 and
  # Terredo tunnels your web browser should favor IPv4 for the same reasons
  prefer-ip6: no

  # Trust glue only if it is within the server's authority
  harden-glue: yes

  # Require DNSSEC data for trust-anchored zones, if such data is absent, the zone becomes BOGUS
  harden-dnssec-stripped: yes

  # Don't use Capitalization randomization as it known to cause DNSSEC issues sometimes
  # see https://discourse.pi-hole.net/t/unbound-stubby-or-dnscrypt-proxy/9378 for further details
  use-caps-for-id: no

  # Reduce EDNS reassembly buffer size.
  # Suggested by the unbound man page to reduce fragmentation reassembly problems
  edns-buffer-size: 1472

  # Perform prefetching of close to expired message cache entries
  # This only applies to domains that have been frequently queried
  prefetch: yes
  prefetch-key: yes

  # One thread should be sufficient, can be increased on beefy machines. In reality for most users running on small networks or on a single machine, it should be unnecessary to seek performance enhancement by increasing num-threads above 1.
  num-threads: 1

  # Ensure kernel buffer is large enough to not lose messages in traffic spikes
  so-rcvbuf: 1m


  so-reuseport: yes
  outgoing-range: 16384
  num-queries-per-thread: 4096


  access-control: 0.0.0.0/0 allow
  access-control: ::/0 allow

  do-not-query-localhost: no


  aggressive-nsec: yes
  cache-max-ttl: 14400
  cache-min-ttl: 0
  hide-identity: yes
  hide-version: yes
  serve-expired: no

  verbosity: 1
  log-queries: no
  extended-statistics: yes
